<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beberapa cara menggunakan function di JavaScript</title>
  <meta name="og:title" content="Beberapa cara menggunakan function di JavaScript">

  <meta name="description" content="Yak yak yak">
  <meta name="og:description" content="Yak yak yak">
  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
  <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="mandaputtra::fullstuck_developer">
  <link rel="shortcut icon" href="https://cdn.glitch.com/238f8585-6bd5-40c4-a0ff-2b87d4acea6c%2Ftil-16.png?v=1561397433743" type="image/x-icon">
  <link rel="icon" href="https://cdn.glitch.com/238f8585-6bd5-40c4-a0ff-2b87d4acea6c%2Ftil-16.png?v=1561397433743" type="image/x-icon">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Mukta&display=swap">
  <meta name="twitter:image" content="https://avatars1.githubusercontent.com/u/23342943?s=460&amp;u=3a5d64c4c86dfbe552ed689e2f968105dff2553a&amp;v=4">
  <meta name="twitter:card" content="summary">
  <meta name="og:image:width" content="256">
  <meta name="og:image:height" content="256">
  <meta name="og:image" content="https://avatars1.githubusercontent.com/u/23342943?s=460&amp;u=3a5d64c4c86dfbe552ed689e2f968105dff2553a&amp;v=4">
  <meta name="twitter:image:alt" content="Full stuck developer">
</head>

<body>
  <main>
    <header class="header-wrapper">
      <h1>
        <a href="/">
          („ÄÉÔø£œâÔø£„ÄÉ„Çû
        </a>
      </h1>
      <ul><li>
          <a href="/stuff/">Stuff</a>
        </li><li>
          <a href="/about/">Me</a>
        </li></ul>
    </header>

    <section>
      <div>
        

<article>
  <header>
    
      <p class="date">19 Oct 2019</p>
    
    <h1>Beberapa cara menggunakan function di JavaScript</h1>
    
      
      
      
    
      
      
      
        <a class="postlist-tag" href="
        /tags/javascript/
      ">javascript</a>
      
    
  </header>
  <div>
    <div>
      <p>Hi! üòÉ this is not right. Mungkin ini adalah beberapa cara kita membuat fungsi di JavaScript yang jarang kita gunakan dan saya harap beberapa contoh disini digunakan dengan tepat. Welcome to JavaScript function jungle!</p>
<h2 id="callback-and-callback-promises">Callback and Callback Promises <a class="direct-link" href="#callback-and-callback-promises">#</a></h2>
<blockquote>
<p>jangan dipakai yak, sekarang sudah jamannya promise. anda tidak mungkin juga kan bikin library lalu kasih tagline &quot;still support callback&quot;</p>
</blockquote>
<p>Jikalau code snippet di bawah ini pernah terlintas di kepala kita, dan kita bertanya bagaimana sih caranya membuat yang seperti ini :</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token comment">// then - cacth</span></span><br><span class="highlight-line">mymodel<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Agus Sumboro'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// works</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// async await</span></span><br><span class="highlight-line"><span class="token keyword">await</span> mymodel<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Agus Sumboro'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// works</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// callback</span></span><br><span class="highlight-line">mymodel<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Agus Sumboro'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">// works also</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// dan contoh lainnya</span></span></code></pre>
<p>yup, pertama kita harus pahami dulu bagaimana sih cara membuat <em>callback</em>, atau gampangnya sebuah <em>function</em> yang return valuenya adalah <em>function</em> :</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token function">cb</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">'Halo Isabela'</span><span class="token punctuation">,</span> console<span class="token punctuation">.</span>log<span class="token punctuation">)</span> <span class="token comment">// Halo Isabela</span></span></code></pre>
<p>oke ini hanya support callback saja, lalu bagaimana jika ini support promise juga? saya sempat ingin membuat pull request di mongoose soal <a href="https://github.com/Automattic/mongoose/issues/7633">views karena menarik</a> di sinilah saya tau kalau ternyata cara sebuah library menghandle <a href="https://github.com/Automattic/mongoose/blob/e25b5aef0b7e5706221d191cfae223e10631b027/lib/query.js#L2070">ini</a> cukup unik :</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">cbPromises</span><span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> Not A Number</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token comment">// check if its function return callback if not return promise</span></span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span> <span class="token comment">// isNaN() not a number</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token function">resolve</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">//  now this works yay!</span></span><br><span class="highlight-line"><span class="token function">cbPromises</span><span class="token punctuation">(</span><span class="token string">'Halo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token comment">// Halo Not A Number</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token function">cbPromises</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 13</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span></span></code></pre>
<p>Menurut saya agak naif menyuruh seorang 'newbie' (saya disini me-<em>refer</em> orang yang baru masuk ke dunia JS) menggunakan <code>async await</code> atau <code>Promise</code> tanpa memberinya kejelasan dahulu bagaimana cara kita membuat promise atau callback. <em>Lest be clear here, and admit something...</em> kita sendiri jarang membuat Promise apalagi Callback kalau di dunia front-end paling saya buat promise cuma untuk <em>Loading Screen</em>. <em>At least we understand how it works and why promise and async is a thing not just syntatic sugar don't we?</em> üòÅ.</p>
<p>Saya juga belum lama masuk ke dunia JS, mungkin 2 tahun kurang lebih. Saat saya pertama kali kerja (dan saat ini saya masih disana juga), salah satu proyek kantor saya adalah aplikasi dengan 300k++ loc (line of code). First commit program itu tercatat 2015 Januari, yaudah callback hell. hahaha. Biasanya program seperti ini di maintain 6 orang kalau di startup, dikarenakan resource minim cuma 2 orang üòÇ yah satu cuti satu kena hajar callback.</p>
<p>Lanjut...</p>
<h2 id="recursive-function">Recursive Function <a class="direct-link" href="#recursive-function">#</a></h2>
<p>Pernah ga ngalamin error seperti ini :</p>
<ul>
<li><code>ERR: ENAMETOOLONG</code> ternyata panjang nama sebuah file/argumen di terminal kita itu terbatas, lebih tepatnya dibatasi oleh OS.</li>
<li><code>warning: possible EventEmitter memory leak detected. 11 listeners added. Use emitter.setMaxListeners() to increase limit.</code></li>
</ul>
<p>Saya sering menemukan ini saat pertama belajar video processing, atau berkerja dengan <code>child_process</code>, <em><strong>mungkin</strong></em> penerapan function ini bisa membantu menyelesaikan masalah. Mungkin besok saya open ke github reponya setelah selesai bersih - bersih yang ga perlu, atau mungkin buat artikel soal video processing saja.</p>
<blockquote>
<p>jika kamu mendapatkan error tsb hal yang dapat kamu lakukan melihat perintah terminal yang kamu gunakan, jika perintah terminal tersebut dapat di minimalisir maka mungkin looping adalah salah satu caranya</p>
</blockquote>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token comment">// recursive is fun</span></span><br><span class="highlight-line"><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span></span><br><span class="highlight-line"><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span></span><br><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">recursiveFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  i<span class="token operator">++</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> element <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span></span><br><span class="highlight-line">  <span class="token keyword">if</span><span class="token punctuation">(</span>element <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token function">recursiveFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>Cara kerja function diatas sangat simple, ambil <code>arr</code> posisi ke <code>i</code>, kalau <code>element</code> bukan 4 maka <code>i+1</code> panggil fungsi <code>recursiveFun()</code> lagi. Bagusnya function seperti ini dia menyimpan value variable yang ada diluarnya. Tentu ini sangat rare digunakan, dan saya sarankan tidak mengunakan ini kalu belum ketemu error seperti diatas yang <em><strong>mungkin</strong></em> saja solusinya adalah ini.</p>
<p>Salah satu code yang mungkin men-<em>trigger</em> error <code>possible EventEmitter memory leak detected.</code> :</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// big two dimensional array</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> element <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token function">supremeHardFunction</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>Jarang terjadi tapi mungkin anda alami, jangan sekali kali menambah <code>eventListener</code> kalau memang tidak perlu atau tidak bisa dihindari.</p>
<h2 id="closures-function">Closures Function <a class="direct-link" href="#closures-function">#</a></h2>
<p>Saya yakin kalau ini sering banyak digunakan dan sangat saya sarankan digunakan. closures merupakan sebuah pattern untuk memberikan private access pada sebuah variable dalam sebuah <em>function</em>. Saya ambil contoh dari MDN saja.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Mozilla'</span><span class="token punctuation">;</span> <span class="token comment">// name merupakan local variable yang ada pada init</span></span><br><span class="highlight-line">  <span class="token keyword">function</span> <span class="token function">displayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// displayName() merupakan inner function, closures</span></span><br><span class="highlight-line">    <span class="token function">alert</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bisa menggunakan variable pada parent function</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token function">displayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<p>Dan sebenarnya kita sering memakai ini, saya sering menggunakan ini saat memakai modul <code>request</code> atau mungkin <code>fetch API</code>. Seperti inilah bentuknya :</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">function</span> <span class="token function">api</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?key=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">function</span> <span class="token function">post</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      body<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      headers<span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token string">'Authorization'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span></span><br><span class="highlight-line">      <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span> get<span class="token punctuation">,</span> post <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token function">api</span><span class="token punctuation">(</span><span class="token string">'super-key-bruh!'</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token comment">// oops kita dah ga perlu lagi masukin API key!</span></span><br><span class="highlight-line">request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://haloexample.com/getexample'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">request<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'https://haloexample.com/postexample'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> halo<span class="token operator">:</span> <span class="token string">'Isabela'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span></code></pre>
<h2 id="fluent-function-%2F-methods-chaining">Fluent Function / Methods Chaining <a class="direct-link" href="#fluent-function-%2F-methods-chaining">#</a></h2>
<p>Sebenarnya saya agak lupa namanya Fluent Function/Waterfall Function banyak yang menyebut Methods Chaining. Tapi tentu sintak dibawah ini tidak asing.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> Œª <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>'rambda<span class="token punctuation">.</span>js<span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">//  not really a lamda function just example</span></span><br><span class="highlight-line">Œª<span class="token punctuation">.</span><span class="token function">chop</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=></span> a <span class="token operator">+</span> b<span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span></code></pre>
<p>Yup, jika pernah terlintas bagaimana sih caranya membuat yang seperti itu. Untuk sesuatu yang simple ini saya memutuskan untuk menggunkan function saja, sebenarnya banyak library modern sekarang sudah menggunakan <code>class</code>.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token comment">// ini function tapi bisa disebut class...</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token comment">// define constructor</span></span><br><span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Julia'</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>shirt <span class="token operator">=</span> <span class="token string">'blue'</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token string">'female'</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">//  use prototype class function</span></span><br><span class="highlight-line"><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// this adalah koenchi</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setShirt</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">shirt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>shirt <span class="token operator">=</span> shirt<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// this adalah koenchi</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setGender</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">gender</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">=</span> gender<span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// this adalah koenchi</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">introduce</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> sheOrHe <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">===</span> <span class="token string">'male'</span> <span class="token operator">?</span> <span class="token string">'he'</span> <span class="token operator">:</span> <span class="token string">'she'</span></span><br><span class="highlight-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">This is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sheOrHe<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> wear </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>shirt<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> shirt</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// this adalah koenchi</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span></code></pre>
<p>Lalu dengan ini kita bisa gunakan snippet diatas secara indah :</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> isabela <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Isabela'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">setShirt</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">'female'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">.</span><span class="token function">introduce</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// atau</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> wawan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">wawan<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Wawan'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">wawan<span class="token punctuation">.</span><span class="token function">setShirt</span><span class="token punctuation">(</span><span class="token string">'blue'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">wawan<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">'male'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">wawan<span class="token punctuation">.</span><span class="token function">introduce</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span></code></pre>
<p>Oke jika anda menggunakan code diatas tanpa <code>return this</code>.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> juni <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line">juni<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Juni'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">'male'</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> hey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token keyword">const</span> juni <span class="token operator">=</span> hey<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'Juni'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">juni<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">'male'</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// setGender is not a function</span></span></code></pre>
<p>ini dikarenakan <code>setName</code> sama sekali tidak me-<em>return</em> value, jadi saat <code>setGender</code> mau mengakses dia dapetnya <code>undefined</code> kasian. Jadi saat anda membuat function dan memanggil <code>this</code> pada saat return, ada kemungkinan anda mengembalikan nilai atau value di function tersebut.</p>
<pre class="language-md"><code class="language-md"><span class="highlight-line">üôã: Lha kalau aku panggil <span class="token code keyword">`this`</span> ini kok malah keluarnya dari instance framework?</span><br><span class="highlight-line">üê®: That's another story...</span></code></pre>
<p>Yak terimakasih telah membaca sampai akhir seperti biasa saya selalu open feedback, silahakan buat issue di repo blog <a href="https://github.com/mandaputtra/mandaputtra.github.io/issues">ini</a> atau mugkin mention saya di <a href="https://twitter.com/_mandaputtra">twitter</a>.</p>
<p>Wrapping up! sebenarnya masih ada banyak sekali function pattern yang biasa dipakai pada JavaScript tapi tentunya tidak bisa saya cover semua karena saya juga masih baru di dunia JS/Node.js ini, hal diatas hanya beberapa pattern yang setidaknya pernah saya gunakan, semoga dapat membantu saat ingin membuat <em>library</em> di npm atau malah ingin berkontribusi ke beberapa <em>library</em> yang sudah ada. Thanks all and as usual have a nice day! üòÑ</p>
<h2 id="tips">Tips <a class="direct-link" href="#tips">#</a></h2>
<p><em>Always name your function</em>, dengan begitu kita tidak susah - susah saat profiling code kita jikalau memang nantinya perlu di profiling code-nya. Jika tidak tidak apa apa, karena memang jarang sekali kasus - kasus memory leak.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token comment">// dont do this :(</span></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">aUsualFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">,</span> params2</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">/** do stuff*/</span> <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// do this instead</span></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">aUsualFunction</span><span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">,</span> paramas3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token comment">// do stuff</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>

    </div>
  </div>
</article>
<p><a href="/">‚Üê Home</a></p>

      </div>
    </section>

    <footer class="footer-wrapper">
      <div>
        <ul>
          
            <li>
              <a href="https://github.com/mandaputtra"> Github </a> </li>
          
            <li>
              <a href="mandaputtra"> Twitter </a> </li>
          
        </ul>
      </div>
    </footer>

  </main>
</body>

</html>
